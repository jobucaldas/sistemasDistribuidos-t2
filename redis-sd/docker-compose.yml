services:
  redis:
    container_name: redis
    image: redis/redis-stack:latest
    ports:
      - "6379:6379"
      - "9003:8001"
    restart: always
    volumes: 
      - ./redis:/data
    networks:
      - redis_sd

  fornecedor:
    build:
      context: ./fornecedor
      dockerfile: dockerfile
    restart: always
    volumes:
      - ./fornecedor:/app
    depends_on:
      - redis
    networks:
      - redis_sd

  fabrica:
    build:
      context: ./fabrica1
      dockerfile: dockerfile
    restart: always
    volumes:
      - ./fabrica:/app
    depends_on:
      - redis
      - almoxarifado
      - fornecedor
    networks:
      - redis_sd

  almoxarifado:
    build:
      context: ./almoxarifado
      dockerfile: dockerfile
    restart: always
    volumes:
      - ./almoxarifado:/app
    depends_on:
      - redis
    networks:
      - redis_sd

networks:
  redis_sd:
    driver: bridge